(this["webpackJsonpreinvent-leaderboard"]=this["webpackJsonpreinvent-leaderboard"]||[]).push([[0],{188:function(e,n,t){},194:function(e,n,t){},195:function(e,n,t){},201:function(e,n){},203:function(e,n){},214:function(e,n){},216:function(e,n){},243:function(e,n){},245:function(e,n){},246:function(e,n){},251:function(e,n){},253:function(e,n){},259:function(e,n){},261:function(e,n){},280:function(e,n){},292:function(e,n){},295:function(e,n){},298:function(e,n,t){},565:function(e,n,t){"use strict";t.r(n);var r=t(11),c=t.n(r),o=t(181),a=t.n(o),i=(t(188),t(2)),s=t.n(i),u=t(9),l=t(23),d=t(69),f=t(12),m=t(57),b=t(56),p=t(15),v=["winner"];var j=function(e){var n=e.winner;return Object(m.a)(e,v),Object(p.jsxs)(c.a.Fragment,{children:[Object(p.jsx)(b.a,{flipId:n.username,children:Object(p.jsx)("div",{className:"username line-item",children:n.username})}),Object(p.jsx)(b.a,{flipId:n.username+"---score",children:Object(p.jsx)("div",{className:"score line-item",children:n.score})})]})};t(194);var h=function(e){var n=e.winners;console.log("Winners:",n);var t=Object.entries(n).map((function(e){var n=Object(l.a)(e,2),t=n[0];n[1];return t})).join(""),r=Object.entries(n).map((function(e){var n=Object(l.a)(e,2),t=n[0],r=n[1];return Object(p.jsx)(j,{winner:Object(f.a)({username:t},r)},t)}));return Object(p.jsxs)("div",{className:"leaderboard",children:[Object(p.jsx)("h1",{children:"Leaderboard"}),Object(p.jsx)(b.b,{className:"leaderboard-items",flipKey:t,children:r})]})},x=(t(195),t(107)),g=new x.a({id:"demogames-sdyhk"});function O(e,n){return null===e?Object.fromEntries(n.map((function(e,n){return[e.username,{score:e.score,change:null,index:n}]}))):Object.fromEntries(n.map((function(n,t){var r=n.username,c=n.score,o=null===e||void 0===e[r]?{index:null,score:null}:e[r],a=o.index,i=o.score,s=null;return null===a||t<a?s="up":t>a?s="down":c>i&&(s="inc"),[r,{score:c,change:s,index:t,previousIndex:a,previousScore:i}]})))}var y=function(e){e.onClick,console.log("App render!!!");var n=Object(r.useState)([]),t=Object(l.a)(n,2),c=t[0],o=t[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(s.a.mark((function e(){var n,t,r,c,a,i,u,l,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.logIn(x.b.anonymous());case 2:return n=e.sent,e.t0=O,e.next=6,n.functions.winners();case 6:e.t1=e.sent,t=(0,e.t0)(null,e.t1),o(t),r=n.mongoClient("mongodb-atlas").db("demo_games").collection("scores"),c=r.watch(),a=!1,i=!1,e.prev=13,l=Object(d.a)(c);case 15:return e.next=17,l.next();case 17:if(!(a=!(f=e.sent).done)){e.next=29;break}return f.value,e.t2=O,e.t3=t,e.next=23,n.functions.winners();case 23:e.t4=e.sent,t=(0,e.t2)(e.t3,e.t4),o(t);case 26:a=!1,e.next=15;break;case 29:e.next=35;break;case 31:e.prev=31,e.t5=e.catch(13),i=!0,u=e.t5;case 35:if(e.prev=35,e.prev=36,!a||null==l.return){e.next=40;break}return e.next=40,l.return();case 40:if(e.prev=40,!i){e.next=43;break}throw u;case 43:return e.finish(40);case 44:return e.finish(35);case 45:return e.abrupt("return",(function(){c.return(),console.log("Unregister from change stream.")}));case 46:case"end":return e.stop()}}),e,null,[[13,31,35,45],[36,,40,44]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(r.useEffect)((function(){!function(){var e=Object.entries(c).filter((function(e){var n=Object(l.a)(e,2),t=(n[0],n[1]);return"up"===t.change||"inc"===t.change}));if(e.length>0){var n=document.querySelectorAll(".score")[e[0][1].index].getBoundingClientRect();document.getElementById("particles").__particles.boom.kaboom({x:n.left+(n.right-n.left)/2,y:n.top+(n.bottom-n.top)/2})}}()})),Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(h,{winners:c})})},k=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,566)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),r(e),c(e),o(e),a(e)}))},w=(t(298),t(13)),E=t(16),I=t(182);function B(){return(B=Object(u.a)(s.a.mark((function e(n){var t,r,c,o,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={autoPlay:!0,direction:"none",life:{count:1,duration:1},spawnColor:{value:"#fa0"},rate:{delay:30,quantity:50},size:{width:1,height:1}},r={emitters:[],particles:{number:{value:50},size:{value:{min:3,max:7}},shape:{type:["circle","square"]},fullScreen:{enable:!0},life:{duration:{sync:!0,value:2},count:1},move:{direction:"none",enable:!0,gravity:{enable:!0},drift:{min:-2,max:2},outModes:{default:"destroy",top:"none"},speed:{min:10,max:30},decay:.03},opacity:{animation:{value:{min:0,max:1},enable:!0,speed:1,startValue:1,sync:!0}}}},c=function(){function e(n){Object(w.a)(this,e),this.container=n,console.log(this.container)}return Object(E.a)(e,[{key:"kaboom",value:function(e){var n=e.x,r=e.y;console.log("KABOOM",n,r),console.log(this.container.canvas);var c=this.container.addEmitter(t);c.position={x:n,y:r},console.log("Added emitter:",c,c.position)}}]),e}(),e.next=5,I.tsParticles.load(n,r);case 5:o=e.sent,a=new c(o),(i=document.getElementById(n)).__particles={container:o,boom:a},i.onclick=function(e){console.log("kaboom",{x:e.clientX,y:e.clientY}),a.kaboom({x:e.clientX,y:e.clientY})};case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){return B.apply(this,arguments)};a.a.render(Object(p.jsxs)(c.a.StrictMode,{children:[Object(p.jsx)(y,{onClick:function(){console.log("click"),console.log(document.getElementById("particles").dataset.boom),document.getElementById("particles").__particles.boom.kaboom()}}),Object(p.jsx)("div",{id:"particles"})]}),document.getElementById("root")),C("particles"),k()}},[[565,1,2]]]);
//# sourceMappingURL=main.96948e12.chunk.js.map